<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>体验快速文件风格转换 | 东の博客</title><meta name="description" content="1 概述对于搞IT的同学来说，技术的更迭一直是很头疼的事情，从原来的PC时代到现在的移动互联网，中间冒出太多东西了，干了这行就必须不断的学习，不然就很容易被行业淘汰了，机器学习是最近几年比较火的一个技术，其中的深度学习应该是最受欢迎的分支了，在市场上已经有大量的应用，大家看到的智能语音助手，智能翻译，智能相机，无人驾驶等都是使用了深度学习的算法。还有笔者之前学习了Udacity的课程，里面的项目有"><meta name="keywords" content="Deep Learning, Tensorflow, CNN, AI, Machine Learning"><meta name="author" content="Aaron.W"><meta name="copyright" content="Aaron.W"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/images/headicon.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="体验快速文件风格转换"><meta name="twitter:description" content="1 概述对于搞IT的同学来说，技术的更迭一直是很头疼的事情，从原来的PC时代到现在的移动互联网，中间冒出太多东西了，干了这行就必须不断的学习，不然就很容易被行业淘汰了，机器学习是最近几年比较火的一个技术，其中的深度学习应该是最受欢迎的分支了，在市场上已经有大量的应用，大家看到的智能语音助手，智能翻译，智能相机，无人驾驶等都是使用了深度学习的算法。还有笔者之前学习了Udacity的课程，里面的项目有"><meta name="twitter:image" content="https://blog.wurendong.com/resource/filetransfer/cnn.png"><meta property="og:type" content="article"><meta property="og:title" content="体验快速文件风格转换"><meta property="og:url" content="https://blog.wurendong.com/2020/05/30/FastStyleTransfer/"><meta property="og:site_name" content="东の博客"><meta property="og:description" content="1 概述对于搞IT的同学来说，技术的更迭一直是很头疼的事情，从原来的PC时代到现在的移动互联网，中间冒出太多东西了，干了这行就必须不断的学习，不然就很容易被行业淘汰了，机器学习是最近几年比较火的一个技术，其中的深度学习应该是最受欢迎的分支了，在市场上已经有大量的应用，大家看到的智能语音助手，智能翻译，智能相机，无人驾驶等都是使用了深度学习的算法。还有笔者之前学习了Udacity的课程，里面的项目有"><meta property="og:image" content="https://blog.wurendong.com/resource/filetransfer/cnn.png"><meta property="article:published_time" content="2020-05-30T09:39:14.000Z"><meta property="article:modified_time" content="2020-06-01T17:10:21.000Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://blog.wurendong.com/2020/05/30/FastStyleTransfer/"><link rel="prev" title="English Greetings - What's up? How are you? How's it going" href="https://blog.wurendong.com/2020/06/07/greeting/"><link rel="next" title="JVM架构介绍" href="https://blog.wurendong.com/2020/05/25/JVM%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"LSQFRHWQK0","apiKey":"6b5e35022be2c98e2b40816ae45a7d5f","indexName":"blog","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"><script src="/assets/js/DPlayer.min.js"></script></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/avatar.jpg'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">4</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">11</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 归类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-dropbox" aria-hidden="true"></i><span> 多宝盒</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-photo"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messages/"><i class="fa-fw fa fa-inbox"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-概述"><span class="toc-text">1 概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-项目运行说明"><span class="toc-text">2 项目运行说明</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-先安装Anaconda"><span class="toc-text">2.1 先安装Anaconda</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-创建虚拟环境"><span class="toc-text">2.2 创建虚拟环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-训练网络"><span class="toc-text">2.3 训练网络</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-评估风格转换网络"><span class="toc-text">2.4 评估风格转换网络</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-风格化视频"><span class="toc-text">2.5 风格化视频</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-运行要求"><span class="toc-text">2.6 运行要求</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/resource/filetransfer/cnn.png)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">东の博客</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 归类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-dropbox" aria-hidden="true"></i><span> 多宝盒</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-photo"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messages/"><i class="fa-fw fa fa-inbox"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">体验快速文件风格转换</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-05-30 17:39:14"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-05-30</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-06-02 01:10:21"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-06-02</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Deep-Learning/">Deep Learning</a><i class="fa fa-angle-right post-meta__separator" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Deep-Learning/CNN/">CNN</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">1.7k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>阅读时长: 6 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h1><p>对于搞IT的同学来说，技术的更迭一直是很头疼的事情，从原来的PC时代到现在的移动互联网，中间冒出太多东西了，干了这行就必须不断的学习，不然就很容易被行业淘汰了，机器学习是最近几年比较火的一个技术，其中的深度学习应该是最受欢迎的分支了，在市场上已经有大量的应用，大家看到的智能语音助手，智能翻译，智能相机，无人驾驶等都是使用了深度学习的算法。还有笔者之前学习了Udacity的课程，里面的项目有根据一段剧本，经过对模型的训练，可以生成新的剧本，还有根据一批图片比如人脸来训练相关模型，可以生成一个新的人脸。当时看到这些的时候还是觉得好神奇的。那时候就听说了使用神经网络可以大大减少传统编程所需要的时间，让程序员失业，所以心里的焦虑油然而生。</p>
<p>这片文章主要是为了先睹为快，并没有设计太多的技术细节，对于一个新的事物，先知其然再知其所以然，循序渐进。文中涉及的项目叫做<strong>快速风格变换</strong>，就是将输入的照片根据另外一张图片的风格，比如油画的风格，生成同样风格的一张新图片。项目是MIT的一位小哥基于tensorflow做出来的，采用的卷积神经网络（Convolutional Neural Network, 简称CNN），可以在下面的地址找到。</p>
<blockquote>
<p>​        <a href="https://github.com/lengstrom/fast-style-transfer" target="_blank" rel="noopener">https://github.com/lengstrom/fast-style-transfer</a></p>
</blockquote>
<p>先来看一下效果，下面有三张图，图一是转换成的图片风格，图二是需要被转换的图片，图三是图二根据图一的风格转换成的新图片。</p>
<div class="justified-gallery"><p><img src="/resource/filetransfer/style/udnie.jpg" alt=""><br><img src="/resource/filetransfer/sample/stata.jpg" alt=""><br><img src="/resource/filetransfer/sample/stata_udnie_header.jpg" alt=""></p>
          </div>



<h1 id="2-项目运行说明"><a href="#2-项目运行说明" class="headerlink" title="2 项目运行说明"></a>2 项目运行说明</h1><h2 id="2-1-先安装Anaconda"><a href="#2-1-先安装Anaconda" class="headerlink" title="2.1 先安装Anaconda"></a>2.1 先安装Anaconda</h2><p>   在深度学习中会有很多依赖的包，不同的项目可能需要的包差别也比较大，比如有的项目1需要python 2和支持包A而项目2需要python 3和支持包B，这样当你同时工作在项目1和项目2的时候切换环境就十分必要，另外在工作的环境里，经常也需要对依赖的包进行管理，Anaconda就是一个很好的工具，可以很方便的进行环境和包的管理。</p>
<p>   Anaconda的安装方法可以在<a href="https://docs.anaconda.com/anaconda/install/" target="_blank" rel="noopener">这里</a>找到，最常用的命令如下</p>
<blockquote>
<ul>
<li>创建新环境<br>conda create -n &lt;环境名&gt;</li>
<li>查看已经创建的环境<br>conda env list 或 conda info --envs</li>
<li>安装包<br>conda install &lt;包名&gt;  也可以使用pip install &lt;包名&gt;</li>
<li>启动环境<br>source activate &lt;环境名&gt; 或 conda deactivate &lt;环境名&gt;</li>
<li>停用环境<br>source deactivate &lt;环境名&gt; 或 conda deactivate &lt;环境名&gt;</li>
<li>删除环境<br>conda remove -n &lt;环境名&gt; --all  或 conda remove --name &lt;环境名&gt; --all<br>注意：目前如果环境没有安装任何包，执行环境删除会报错，可以先随便安装一个包再删除。</li>
</ul>
</blockquote>
<h2 id="2-2-创建虚拟环境"><a href="#2-2-创建虚拟环境" class="headerlink" title="2.2 创建虚拟环境"></a>2.2 创建虚拟环境</h2><ul>
<li>创建环境tf-gpu，其中安装了tensorflow-gpu，如果不支持tensorflow-gpu可以使用tensorflow<blockquote>
<p>conda create -n tf-gpu  tensorflow-gpu=2.1.0</p>
</blockquote>
</li>
<li>激活环境<blockquote>
<p>conda activate tf-gpu</p>
</blockquote>
</li>
<li>打开notebook，在这个项目中我没有用到，jupyterlab跟jupyter notebook类似，都是功能强大的记事本，jupyter notebook是基于web的交互计算环境，用来创建jupyter notebook文档，支持多种语言，如Python，Julia，R等，用来进行数据分析，数据可视化，和进一步的交互性，探索性计算。而Jupyterlab是下一代的用户界面，包含记事本，它包含模块化结构，它可以在同一个窗口以tab的形式打开多个记事本或文件（例如HTML，文本，Markdown等），类似一个集成开发环境。<blockquote>
<p>conda intall jupyterlab<br>jupyter lab</p>
</blockquote>
</li>
<li>安装moviepy，如果只是处理图片应该不需要。<blockquote>
<p>pip install moviepy==1.0.2</p>
</blockquote>
</li>
</ul>
<h2 id="2-3-训练网络"><a href="#2-3-训练网络" class="headerlink" title="2.3 训练网络"></a>2.3 训练网络</h2><p>  使用style.py来训练风格转换神经网络，使用python style.py可以看到所有需要的参数，训练网络需要花费很长的时间，如果在本机跑的话机器会疯狂运转，发热很厉害，而且本地机器要求配置也比较高，可以租用类似亚马逊的云服务器来跑。</p>
<pre><code>用法示例
python style.py --style path/to/style/img.jpg \
  --checkpoint-dir checkpoint/path \
  --test path/to/test/img.jpg \
  --test-dir path/to/test/dir \
  --content-weight 1.5e1 \
  --checkpoint-iterations 1000 \
  --batch-size 20</code></pre><p>  其中--style跟--checkpoint-dir是必须的，其他的可以选择默认，--style为用来训练的风格图片，--checkpoint-dir是输出的模型文件，后面的评估会用到。</p>
<h2 id="2-4-评估风格转换网络"><a href="#2-4-评估风格转换网络" class="headerlink" title="2.4 评估风格转换网络"></a>2.4 评估风格转换网络</h2><p>  使用evaluate.py来评估风格转换网络。运行python evaluate.py可以看到所有的参数。</p>
<pre><code>用法示例
python evaluate.py --checkpoint path/to/style/model.ckpt \
  --in-path dir/of/test/imgs/ \
  --out-path dir/for/results/

--checkpoint指定模型，--in-path输入图片路径，--ou t-path输出图片路径</code></pre><p>  训练的时间比较长，如果可以访问google drive，可以在<a href="https://drive.google.com/drive/folders/0B9jhaT37ydSyRk9UX0wwX3BpMzQ" target="_blank" rel="noopener">这里</a>找到现成的模型文件，这里也贴上我跑出来的模型文件。</p>
<table>
<thead>
<tr>
<th>图片</th>
<th>模型</th>
</tr>
</thead>
<tbody><tr>
<td><img src="/resource/filetransfer/style/la_muse.jpg" alt="la_muse" style="zoom:25%;" /></td>
<td><a href="/resource/filetransfer/model/la-muse.ckpt">LaMuse</a></td>
</tr>
<tr>
<td><img src="/resource/filetransfer/style/rain_princess.jpg" alt="rain-princess" style="zoom:12%;" /></td>
<td><a href="/resource/filetransfer/model/rain-princess.ckpt">RainPrincess</a></td>
</tr>
<tr>
<td><img src="/resource/filetransfer/style/the_scream.jpg" alt="the_scream" style="zoom:25%;" /></td>
<td><a href="/resource/filetransfer/model/scream.ckpt">Scream</a></td>
</tr>
<tr>
<td><img src="/resource/filetransfer/style/the_shipwreck_of_the_minotaur.jpg" alt="the_shipwreck_of_the_minotaur" style="zoom:15%;" /></td>
<td><a href="/resource/filetransfer/model/wreck.ckpt">Wreck</a></td>
</tr>
<tr>
<td><img src="/resource/filetransfer/style/udnie.jpg" alt="udnie" style="zoom:25%;" /></td>
<td><a href="/resource/filetransfer/model/udnie.ckpt">Udnie</a></td>
</tr>
<tr>
<td><img src="/resource/filetransfer/style/wave.jpg" alt="wave" style="zoom:15%;" /></td>
<td><a href="/resource/filetransfer/model/wave.ckpt">Wave</a></td>
</tr>
</tbody></table>
<p>  下面是我用自己的图片输入产生的输出。</p>
  <img src="/resource/filetransfer/image/input.jpg" alt="input" style="zoom:25%;" />

<table>
<thead>
<tr>
<th>LaMuse</th>
<th>RainPrincess</th>
<th>Scream</th>
<th>Wreck</th>
<th>Udnie</th>
<th>Wave</th>
</tr>
</thead>
<tbody><tr>
<td><img src="/resource/filetransfer/image/Yorkshire-la-muse.jpg" alt="LaMuse" style="zoom:25%;" /></td>
<td><img src="/resource/filetransfer/image/Yorkshire-rain-princess.jpg" alt="RainPrincess" style="zoom:25%;" /></td>
<td><img src="/resource/filetransfer/image/Yorkshire-scream.jpg" alt="Scream" style="zoom:25%;" /></td>
<td><img src="/resource/filetransfer/image/Yorkshire-wreck.jpg" alt="Wreck" style="zoom:25%;" /></td>
<td><img src="/resource/filetransfer/image/Yorkshire-udnie.jpg" alt="Udnie" style="zoom:25%;" /></td>
<td><img src="/resource/filetransfer/image/Yorkshire-wave.jpg" alt="Wave" style="zoom:25%;" /></td>
</tr>
</tbody></table>
<h2 id="2-5-风格化视频"><a href="#2-5-风格化视频" class="headerlink" title="2.5 风格化视频"></a>2.5 风格化视频</h2><p>使用transform_video.py来转换视频的风格。运行python transform_video.py可以查看所有参数。要求ffmpeg。</p>
<pre><code>用法示例
python transform_video.py --in-path path/to/input/vid.mp4 \
  --checkpoint path/to/style/model.ckpt \
  --out-path out/video.mp4 \
  --device /gpu:0 \
  --batch-size 4

--in-path输入视频，--checkpoint模型文件</code></pre><p>示例效果</p>
<div id="dplayer0" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer0"),"theme":"#FADFA3","screenshot":true,"video":{"url":"/resource/filetransfer/video/foxsample.mp4","pic":"/resource/filetransfer/video/foxsample.png"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script>

<p>我使用另外一个风格进行处理，效果如下</p>
<table>
<thead>
<tr>
<th>原视频</th>
<th>LaMuse</th>
</tr>
</thead>
<tbody><tr>
<td><div id="dplayer1" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer1"),"theme":"#FADFA3","screenshot":true,"video":{"url":"/resource/filetransfer/video/fox.mp4","pic":"/resource/filetransfer/video/fox.png"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script></td>
<td><div id="dplayer2" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer2"),"theme":"#FADFA3","screenshot":true,"video":{"url":"/resource/filetransfer/video/fox-la-muse.mp4","pic":"/resource/filetransfer/video/fox-la-muse.png"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script></td>
</tr>
</tbody></table>
<h2 id="2-6-运行要求"><a href="#2-6-运行要求" class="headerlink" title="2.6 运行要求"></a>2.6 运行要求</h2><p>最后说明下关于跑该项目的硬性要求，下面是最低要求。</p>
<ul>
<li>TensorFlow 0.11.0 </li>
<li>Python 2.7.9, Pillow 3.4.2, scipy 0.18.1, numpy 1.11.2</li>
<li>If you want to train (and don’t want to wait for 4 months):<ul>
<li>A decent GPU</li>
<li>All the required NVIDIA software to run TF on a GPU (cuda, etc)</li>
</ul>
</li>
<li>ffmpeg 3.1.3 if you want to stylize video</li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Aaron.W</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.wurendong.com/2020/05/30/FastStyleTransfer/">https://blog.wurendong.com/2020/05/30/FastStyleTransfer/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.wurendong.com" target="_blank">东の博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Deep-Learning/">Deep Learning</a><a class="post-meta__tags" href="/tags/Tensorflow/">Tensorflow</a><a class="post-meta__tags" href="/tags/CNN/">CNN</a><a class="post-meta__tags" href="/tags/AI/">AI</a><a class="post-meta__tags" href="/tags/Machine-Learning/">Machine Learning</a></div><div class="post_share"><div class="social-share" data-image="/resource/greeting/say-hello.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/images/account/wechat.jpeg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/images/account/alipay.jpeg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/06/07/greeting/"><img class="prev_cover" src="/resource/greeting/say-hello.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">English Greetings - What's up? How are you? How's it going</div></div></a></div><div class="next-post pull_right"><a href="/2020/05/25/JVM%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/"><img class="next_cover" src="/images/jvm/jvm_binary_code.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JVM架构介绍</div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail','link'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'aa7vwmys5ccUAOkX2Xxr4Mhv-gzGzoHsz',
  appKey: 'YNSlkzDfTjLug30OfblyHi4j',
  notify: false,
  verify: false,
  placeholder: 'Please leave your footprints',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'en',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Aaron.W</div><div class="framework-info"><span>开发 </span><a href="http://www.flyingost.com" target="_blank" rel="noopener"><span>Flyingost</span></a><span class="footer-separator">|</span><span>版权所有 </span><a href="https://github.com/WuRendong/" target="_blank" rel="noopener"><span>Aaron.W</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@3/instantpage.min.js" type="module"></script><script src="/js/search/algolia.js"></script></body></html>